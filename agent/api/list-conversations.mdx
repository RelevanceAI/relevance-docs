---
title: 'List Conversations API'
sidebarTitle: 'List conversations'
description: 'How to all list conversations with an Agent'
---

## Relevance Keys
<Snippet file="relevance-keys.mdx" />

## Agent Id
<Snippet file="agent-id.mdx" />

## Conversation Id
### From URL
<Snippet file="conversation-id.mdx" />

### API call to list all conversation Ids
To list all conversations with your Agent, provide the corresponding values for `Region`, `Agent Id` and `Authorization token` in the
code snippet below.

    ```Python
    authorization_token = f"{project_id}:{api_key}"   # Both values can be found in the API Keys page
    region = Region       # Can be found in the API Keys page
    agent_id = Agent_id   # Can be found in the Agent page URL

    ```

```Python
base_url = f"https://api-{region}.stack.tryrelevance.com/latest"

filters = [
    {
        "filter_type": "exact_match",
        "field": "type",
        "condition_value": "conversation",
    },
    {
        "filter_type": "exact_match",
        "field": "conversation.agent_id",
        "condition_value": agent_id
    }
]

headers = {
    "Authorization": authorization_token
}

# Send the POST request
response = requests.post(base_url+"/knowledge/sets/list", headers=headers, json={
    "filters":filters, "include_hidden":True
})

response.json()["results"]
```

The output is a list of dictionaries. All conversation Ids associated with the target agent can be found under the `knowledge_set` field.
In the sample below, `041157d4-61bb-4855-8202-cdf8fab7202a` is a conversation that can be used in the next step.

`'knowledge_set': '041157d4-61bb-4855-8202-cdf8fab7202a'`

## API call to list all conversations using the conversation Id(s)

```Python

# Send the POST request
response = requests.post(base_url + "knowledge/list", headers=headers, data={
    "knowledge_set": conversation_id,
    "filters": [],
    "sort": [
        {
            "insert_date_": "desc"
        }
    ]
})

conversation_messages = response.json()["results"]
```